{% extends 'layouts/general_layout.html' %}
{% load static %}

{% block title %}Nexus Gaming{% endblock title %}

{# CSS para el fondo animado y algunos toques #}
{% block extra_head %}
<style>
  .bg-animated{
    background: linear-gradient(270deg,#0b0e13,#141821,#0b0e13,#00ff99,#7c3aed);
    background-size: 1200% 1200%;
    animation: gradientMove 16s ease infinite;
  }
  @keyframes gradientMove{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }
  .glass{
    background: rgba(255,255,255,.04);
    border: 1px solid rgba(255,255,255,.08);
    backdrop-filter: blur(6px);
  }
</style>
{% endblock extra_head %}

{% block content %}
<div class="min-h-screen w-full bg-[#0b0e13] text-white">
  <!-- HERO -->
  <section class="relative bg-animated">
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-[#0b0e13]/40 to-[#0b0e13]"></div>

    <div class="relative max-w-7xl mx-auto px-4 py-16 sm:py-24 text-center">
      <span class="inline-flex items-center gap-2 rounded-full border border-white/10 glass px-4 py-1 text-xs tracking-wider uppercase">
        <span class="inline-block w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_18px_#34d399]"></span>
        New Season
      </span>
      <h1 class="mt-6 text-4xl sm:text-6xl font-extrabold leading-tight">
        Nexus <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">Gaming</span>
      </h1>
      <div class="mt-8 flex justify-center gap-3">
        <a href="#featured" class="rounded-xl px-5 py-3 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold transition">Juegos destacados</a>
        <a href="#news" class="rounded-xl px-5 py-3 glass hover:bg-white/10 font-semibold transition">Noticias</a>
      </div>
    </div>
  </section>

  <!-- KPIs -->
  <section class="border-y border-white/5 bg-white/[0.02]">
    <div class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-2 sm:grid-cols-4 gap-6 text-center">
      <div><p class="text-2xl font-bold">120+</p><p class="text-white/60 text-sm">Juegos</p></div>
      <div><p class="text-2xl font-bold">35</p><p class="text-white/60 text-sm">Torneos</p></div>
      <div><p class="text-2xl font-bold">5k</p><p class="text-white/60 text-sm">Jugadores</p></div>
      <div><p class="text-2xl font-bold">24/7</p><p class="text-white/60 text-sm">Servers</p></div>
    </div>
  </section>

  <!-- FEATURED GAMES -->
  <section id="featured" class="max-w-7xl mx-auto px-4 py-12">
    <div class="flex items-end justify-between gap-3 mb-6">
      <h2 class="text-2xl sm:text-3xl font-bold">Juegos destacados</h2>
      <a class="text-emerald-400 hover:underline" href="{% url 'post:post_list' %}">Ver todo</a>
    </div>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {# Si tenés queryset 'games' con: title, cover (ImageField), genre, rating #}
      {% if games %}
        {% for g in games %}
        <article class="group overflow-hidden rounded-2xl glass hover:border-emerald-400/40 transition">
          <div class="h-48 w-full overflow-hidden">
            <img src="{{ g.cover.url }}" alt="{{ g.title }}" class="h-full w-full object-cover group-hover:scale-[1.03] transition">
          </div>
          <div class="p-5">
            <div class="flex items-center justify-between">
              <span class="text-xs tracking-wider uppercase text-white/60">{{ g.genre }}</span>
              <span class="text-sm font-semibold text-emerald-400">★ {{ g.rating|default:"4.7" }}</span>
            </div>
            <h3 class="mt-2 text-lg font-bold">{{ g.title }}</h3>
            <a href="{% url 'game_detail' g.pk %}" class="mt-4 inline-block rounded-lg bg-emerald-500 hover:bg-emerald-400 text-black font-semibold px-4 py-2 transition">
              Jugar / Ver más
            </a>
          </div>
        </article>
        {% endfor %}
      {% else %}
        {# Placeholders si aún no tenés modelo #}
        {% for post in posts %}
        <article class="overflow-hidden rounded-2xl glass">
          <div class="h-48 w-full overflow-hidden">
            {% with post.images.all|first as post_image %}
                        {% if post_image %}
                            <img class="h-full w-full object-cover" 
                                 src="{{ post_image.image.url }}" 
                                 alt="{{ post.title }}">
                        {% else %}
                            <span class="text-white text-xl font-libertinus-bold text-center px-4">
                                {{ post.title|truncatechars:40 }}
                            </span>
                        {% endif %}
                    {% endwith %}
            <img src="{{ post.images.first.url }}" alt="Cover" class="h-full w-full object-cover">
          </div>
          <div class="p-5">
            <div class="flex items-center justify-between">
              <span class="text-xs tracking-wider uppercase text-white/60">{{post.category}}</span>
              <span class="text-sm font-semibold text-emerald-400">★ {{post.author}}</span>
            </div>
            <h3 class="text-lg font-bold">{{post.title}}</h3>
            <a href="{% url 'post:post_detail' post.slug %}" class="mt-6 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-black font-semibold px-4 py-2 transition">
              Ver más
            </a>
          </div>
        </article>
        {% endfor %}
      {% endif %}
    </div>
  </section>
</div>
{% endblock content %}
